"use strict";(self.webpackChunkecommerce_app=self.webpackChunkecommerce_app||[]).push([[302],{6688:(w,c,t)=>{t.r(c),t.d(c,{SingleSignOn:()=>E,default:()=>U});var a=t(53547),l=t(68547),P=t(22754),y=t.n(P),i=t(35395),b=t(64459),C=t(80117),M=t(9524),I=t(33483),L=t(53575),f=t(2632),d=t(39272),D=t(97132),T=t(18446),j=t.n(T),B=t(58836),m=t(32104),h=t(92699),u=t(53209);const G=u.object().shape({autoRegister:u.bool().required(l.translatedErrors.required),defaultRole:u.mixed().when("autoRegister",(e,s)=>e?s.required(l.translatedErrors.required):s.nullable())});var x=Object.defineProperty,A=Object.defineProperties,F=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,v=(e,s,o)=>s in e?x(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,Z=(e,s)=>{for(var o in s||(s={}))H.call(s,o)&&v(e,o,s[o]);if(p)for(var o of p(s))N.call(s,o)&&v(e,o,s[o]);return e},z=(e,s)=>A(e,F(s));const S=z(Z({},h.Z.settings.sso),{readRoles:h.Z.settings.roles.read}),E=()=>{const{formatMessage:e}=(0,D.useIntl)(),{isLoading:s,allowedActions:{canUpdate:o,canReadRoles:V}}=(0,l.useRBAC)(S),[{formErrors:r,initialData:W,isLoading:J,modifiedData:g,showHeaderButtonLoader:K},_,{handleChange:R,handleSubmit:Q}]=(0,m.G4)((0,B.IF)("providers/options"),G,()=>{},["autoRegister","defaultRole"]),{roles:X}=(0,m.bF)(V);(0,l.useFocusWhenNavigate)();const Y=s||J;(0,a.useEffect)(()=>{if(r.defaultRole){const n='[name="defaultRole"]';document.querySelector(n).focus()}},[r]);const O=j()(W,g);return a.createElement(i.Layout,null,a.createElement(l.SettingsPageTitle,{name:"SSO"}),a.createElement(C.Main,{tabIndex:-1},a.createElement("form",{onSubmit:n=>{if(O){n.preventDefault();return}Q(n)}},a.createElement(i.HeaderLayout,{primaryAction:a.createElement(b.Button,{"data-testid":"save-button",disabled:O,loading:K,startIcon:a.createElement(y(),null),type:"submit",size:"L"},e({id:"global.save",defaultMessage:"Save"})),title:e({id:"Settings.sso.title",defaultMessage:"Single Sign-On"}),subtitle:e({id:"Settings.sso.description",defaultMessage:"Configure the settings for the Single Sign-On feature."})}),a.createElement(i.ContentLayout,null,Y?a.createElement(l.LoadingIndicatorPage,null):a.createElement(M.Stack,{spacing:4,background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},a.createElement(I.Typography,{variant:"delta",as:"h2"},e({id:"global.settings",defaultMessage:"Settings"})),a.createElement(d.Grid,{gap:4},a.createElement(d.GridItem,{col:6,m:6,s:12},a.createElement(L.ToggleInput,{"aria-label":"autoRegister","data-testid":"autoRegister",disabled:!o,checked:g.autoRegister,hint:e({id:"Settings.sso.form.registration.description",defaultMessage:"Create new user on SSO login if no account exists"}),label:e({id:"Settings.sso.form.registration.label",defaultMessage:"Auto-registration"}),name:"autoRegister",offLabel:e({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:e({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:n=>{R({target:{name:"autoRegister",value:n.target.checked}})}})),a.createElement(d.GridItem,{col:6,m:6,s:12},a.createElement(f.Select,{disabled:!o,hint:e({id:"Settings.sso.form.defaultRole.description",defaultMessage:"It will attach the new authenticated user to the selected role"}),error:r.defaultRole?e({id:r.defaultRole.id,defaultMessage:r.defaultRole.id}):"",label:e({id:"Settings.sso.form.defaultRole.label",defaultMessage:"Default role"}),name:"defaultRole",onChange:n=>{R({target:{name:"defaultRole",value:n}})},placeholder:e({id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}),value:g.defaultRole},X.map(({id:n,name:$})=>a.createElement(f.Option,{key:n,value:n.toString()},$))))))))))},U=()=>a.createElement(l.CheckPagePermissions,{permissions:S.main},a.createElement(E,null))}}]);
